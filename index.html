<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Bluff Den - The Game</title>
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&family=Cherry+Swash:wght@400;700&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
</head>

<body>
    <div id="app-container">
        <header>
            <img src="assets/bunnyheader.png" alt="Rabbit" class="header-image left">
            <div class="header-content">
                <h1>Bluff Den</h1>
                <p>Exciting 4-10 player party game</p>
            </div>
            <img src="assets/foxheader.png" alt="Fox" class="header-image right">
        </header>
        <main>
            <!-- SETUP SCREEN -->
            <div id="setup-screen" class="screen active">
                <!-- Game Setup Card -->
                <div class="card setup-card">
                    <div class="setup-header">
                        <h2>Game Setup</h2>
                    </div>
                    
                    <div class="player-count-container">
                        <label class="player-count-label" for="player-count">Number of players:</label>
                        
                        <div class="player-counter">
                            <button id="decrease-players" class="counter-btn" aria-label="Decrease players">−</button>
                            <div class="counter-display" id="player-count-display">4</div>
                            <button id="increase-players" class="counter-btn" aria-label="Increase players">+</button>
                        </div>
                        
                        <input type="hidden" id="player-count" value="4">
                        <div class="counter-note">4-10 players</div>
                    </div>
                    
                    <div class="player-inputs-header">
                    </div>
                    <div id="player-inputs"></div>

                    <button id="start-game-btn" class="btn btn-primary-large">
                        <span class="btn-icon">🎯</span>
                        <span> Start the Hunt</span>
                    </button>
                </div>
                
                <div id="rules-container">
                    <details>
                        <summary>📋 How to Play</summary>
                        <div id="rules-content">
                            <div class="rules-intro">
                                <h2>Welcome to Bluff Den</h2>
                                <p class="rules-tagline">A game of deception where foxes hunt rabbits in plain sight.</p>
                            </div>

                            <section class="rules-section">
                                <div class="section-header">
                                    <h3>Game Overview</h3>
                                </div>
                                <div class="rules-highlight-box">
                                    <p><strong>Goal:</strong> First player to reach <span class="carrot-highlight">25 carrots 🥕</span> wins!</p>
                                </div>
                                
                                <div class="rules-grid">
                                    <div class="rules-card">
                                        <h4>The Foxes</h4>
                                        <p>All players except one</p>
                                        <ul>
                                            <li>Know the secret word</li>
                                            <li>Give clues to catch the rabbit</li>
                                            <li>Win by successful detection</li>
                                        </ul>
                                    </div>
                                    <div class="rules-card">
                                        <h4>The Rabbit</h4>
                                        <p>One player chosen randomly</p>
                                        <ul>
                                            <li>Doesn't know the word</li>
                                            <li>Must blend in with foxes</li>
                                            <li>Wins by guessing correctly</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="game-basics">
                                    <div class="basics-item">
                                        <strong>Players:</strong> 4-10 people
                                    </div>
                                    <div class="basics-item">
                                        <strong>Starting:</strong> 10 carrots each
                                    </div>
                                    <div class="basics-item">
                                        <strong>Betting:</strong> 1-3 carrots per round
                                    </div>
                                </div>
                            </section>

                            <section class="rules-section">
                                <div class="section-header">
                                    <h3>Round Structure</h3>
                                </div>
                                
                                <div class="round-steps">
                                    <div class="step-card">
                                        <div class="step-number">1</div>
                                        <div class="step-content">
                                            <h4>Role Assignment</h4>
                                            <p>Foxes see the secret word highlighted on a grid. The rabbit sees only the grid without knowing which word is secret.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="step-card">
                                        <div class="step-number">2</div>
                                        <div class="step-content">
                                            <h4>First Clues</h4>
                                            <p>Each player gives a broad, one-word clue out loud. The rabbit must blend in without knowing the target word.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="step-card">
                                        <div class="step-number">3</div>
                                        <div class="step-content">
                                            <h4>Place Bets</h4>
                                            <p><strong>Foxes:</strong> Bet on catching the rabbit<br>
                                            <strong>Rabbit:</strong> Bet on guessing the word</p>
                                        </div>
                                    </div>
                                    
                                    <div class="step-card">
                                        <div class="step-number">4</div>
                                        <div class="step-content">
                                            <h4>Second Clues</h4>
                                            <p>Everyone gives a more specific second clue. Foxes must be careful not to make it too obvious.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="step-card">
                                        <div class="step-number">5</div>
                                        <div class="step-content">
                                            <h4>Voting & Guessing</h4>
                                            <p>All players vote on who they think is the rabbit. Then the rabbit makes their final word guess from the grid.</p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="rules-section">
                                <div class="section-header">
                                    <h3>Scoring</h3>
                                </div>
                                
                                <div class="scoring-scenarios">
                                    <div class="scenario-card victory">
                                        <div class="scenario-header">
                                            <h4>Fox Victory</h4>
                                            <div class="scenario-outcome">Rabbit caught + Word not guessed</div>
                                        </div>
                                        <div class="scenario-payout">
                                            <span class="winner">Foxes win 2× their bets</span>
                                            <span class="loser">Rabbit loses their bet</span>
                                        </div>
                                    </div>
                                    
                                    <div class="scenario-card escape">
                                        <div class="scenario-header">
                                            <h4>Rabbit Victory</h4>
                                            <div class="scenario-outcome">Rabbit escaped + Word guessed correctly</div>
                                        </div>
                                        <div class="scenario-payout">
                                            <span class="winner">Rabbit wins 3× their bet</span>
                                            <span class="loser">Foxes lose their bets</span>
                                        </div>
                                    </div>
                                    
                                    <div class="scenario-card draw">
                                        <div class="scenario-header">
                                            <h4>Draw</h4>
                                            <div class="scenario-outcome">Both sides succeed</div>
                                        </div>
                                        <div class="scenario-payout">
                                            <span class="neutral">Everyone gets bets back</span>
                                        </div>
                                    </div>
                                    
                                    <div class="scenario-card failure">
                                        <div class="scenario-header">
                                            <h4>Total Failure</h4>
                                            <div class="scenario-outcome">Both sides fail</div>
                                        </div>
                                        <div class="scenario-payout">
                                            <span class="loser">Everyone loses their bets</span>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="rules-section">
                                <div class="section-header">
                                    <h3>Game End</h3>
                                </div>
                                
                                <div class="endgame-conditions">
                                    <div class="condition-card">
                                        <div>
                                            <strong>Victory:</strong> First to 25 carrots 🥕
                                        </div>
                                    </div>
                                    
                                    <div class="condition-card">
                                        <div>
                                            <strong>Elimination:</strong> Player reaches 0 carrots
                                        </div>
                                    </div>
                                    
                                    <div class="condition-card">
                                        <div>
                                            <strong>Time Limit:</strong> Maximum 10 rounds
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </details>
                </div>
            </div>

            <!-- GAME SCREEN (Container for all active game phases) -->
            <div id="game-screen" class="screen">
                <div id="game-info-bar">
                    <span id="round-counter">Round 1 / 10</span>
                    <ul id="player-scores"></ul>
                </div>

                <div id="game-phase-container">
                    <!-- Pass Device Screen -->
                    <div id="pass-device-screen" class="screen">
                        <div class="card">
                            <h2 id="pass-to-player-name"></h2>
                            <p>Hand the device to the player above.</p>
                            <button id="show-role-btn" class="btn">Ready! Show My Role</button>
                        </div>
                    </div>
                    <!-- Role Reveal Screen -->
                    <div id="reveal-screen" class="screen">
                         <div class="card">
                            <h2 id="reveal-role-title"></h2>
                            <p id="reveal-instruction"></p>
                            <div id="reveal-word-grid" class="word-grid"></div>
                            <button id="role-revealed-btn" class="btn">I've Got It!</button>
                        </div>
                    </div>
                    <!-- Main Phase Screen (Clues, Wager, Verdict) -->
                    <div id="main-phase-screen" class="screen">
                        <div class="card">
                            <h2 id="phase-title"></h2>
                            <p id="phase-instruction"></p>
                            <div id="timer-container">
                                <div id="timer-display">0:20</div>
                                <div id="timer-label">Time Remaining</div>
                            </div>
                            <div id="action-input-area"></div>
                            <button id="submit-action-btn" class="btn">Submit</button>
                        </div>
                        <div id="main-word-grid-container">
                            <h3>Word Grid</h3>
                            <div id="main-word-grid" class="word-grid"></div>
                        </div>
                    </div>
                     <!-- Buffer Screen -->
                    <div id="buffer-screen" class="screen">
                        <div class="card buffer-screen">
                            <h2>🔄 Pass Device</h2>
                            <p>Please hand the device to the next player and ensure the previous player looks away.</p>
                            <button id="continue-buffer-btn" class="btn">Ready - Continue</button>
                        </div>
                    </div>
                    <!-- Vote Results Screen -->
                    <div id="vote-results-screen" class="screen">
                        <div class="card">
                            <h2>📊 Voting Results</h2>
                            <div id="vote-results-content">
                                <!-- Content generated by JS -->
                            </div>
                            <button id="continue-after-votes-btn" class="btn">Reveal the Rabbit!</button>
                        </div>
                    </div>
                    <!-- Weasel Reveal Screen -->
                    <div id="weasel-reveal-screen" class="screen">
                        <div class="card">
                            <h2>🎭 The Moment of Truth</h2>
                            <div id="weasel-reveal-content">
                                <!-- Content generated by JS -->
                            </div>
                            <button id="continue-to-guess-btn" class="btn">Continue to Rabbit's Guess</button>
                        </div>
                    </div>
                    <!-- Weasel Guess Screen -->
                    <div id="weasel-guess-screen" class="screen">
                        <div class="card">
                            <h2 id="weasel-guess-title">🐰 Rabbit's Final Guess</h2>
                            <p id="weasel-guess-instruction">The Rabbit must now guess the secret word from the grid below. Everyone can watch!</p>
                            <div id="weasel-guess-grid" class="word-grid"></div>
                            <button id="submit-weasel-guess-btn" class="btn" style="display: none;">Submit Guess</button>
                        </div>
                    </div>
                    
                    <!-- Scoring Screen -->
                    <div id="scoring-screen" class="screen">
                        <div id="scoring-summary" class="card">
                            <!-- Content generated by JS -->
                        </div>
                        <button id="next-round-btn" class="btn">Next Round</button>
                    </div>
                    <!-- Game Over Screen -->
                    <div id="game-over-screen" class="screen">
                        <div class="card">
                            <h2 id="game-over-title">Game Over!</h2>
                            <p id="winner-announcement"></p>
                            <button id="play-again-btn" class="btn">Play Again</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="js/script.js"></script> 
</body>
</html>